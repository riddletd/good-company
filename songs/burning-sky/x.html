<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chords & Lyrics</title>
    <style>
      body {
        font-family: "Courier New", monospace;
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        background-color: #f5f5dc;
        color: #333;
      }

      .song-container {
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      h1 {
        text-align: center;
        color: #2c5f2d;
        margin-bottom: 10px;
      }

      .artist {
        text-align: center;
        color: #666;
        font-style: italic;
      }

      .audio {
        width: 100%;
        display: flex;
        justify-content: center;
        margin: 20px 0 30px 0;
      }

      table {
        margin-bottom: 50px;
        font-size: 0.9em;
        color: #666;
      }

      td {
        min-width: 75px;
      }

      td button {
        color: #333;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 3px;
        cursor: pointer;
        font-size: 0.85em;
        height: 20px;
        width: 20px;
      }

      td button:hover {
        background-color: #f0f0f0;
      }

      .pad-space {
        padding-left: 10px;
      }

      .section-title {
        font-weight: bold;
        color: #2c5f2d;
        margin-bottom: 10px;
        text-transform: uppercase;
        font-size: 0.9em;
      }

      pre {
        color: #333;
        line-height: 1.5;
        font-size: 1em;
      }

      .chords {
        color: #d9534f;
        font-weight: bold;
        font-size: 0.95em;
        letter-spacing: 0.5px;
      }

      .riffs {
        display: flex;
        flex-wrap: wrap;
      }

      .riff {
        padding: 30px;
      }

      .riff-section-title {
        font-weight: bold;
        color: #2c5f2d;
        margin-bottom: 10px;
        font-size: 1.1em;
      }
    </style>
  </head>
  <body>
    <div class="song-container">
      <h1>Burnin' Sky</h1>
      <div class="artist">Bad Company</div>

      <div class="audio">
        <audio controls loop preload="metadata" onplay="pauseOtherAudio(this)">
          <source src="master.mp3" type="audio/mpeg" />
          Your browser doesn't support audio.
        </audio>
      </div>

      <table>
        <tr>
          <td>Original Key:</td>
          <td class="pad-space"><span id="originalKeyDisplay">A#</span> (<span id="originalKeyDistance">-2</span>)</td>
        </tr>
        <tr>
          <td>Key:</td>
          <td class="pad-space"><span id="currentKey">C</span> (<span id="currentKeyDistance">0</span>)</td>
          <td>
            <button onclick="transposeDown()">-</button>
            <button onclick="transposeUp()">+</button>
          </td>
        </tr>
        <tr>
          <td>Bpm:</td>
          <td class="pad-space">~95</td>
        </tr>
        <tr>
          <td>Time Sign:</td>
          <td class="pad-space">4/4</td>
        </tr>
      </table>
      <div>
        <div class="section-title">RIFFS</div>
        <hr />
        <div class="riffs">
          <div class="riff">
            <pre><span class="riff-section-title">r1</span>: 1 bar</pre>
            <pre><span>1</span>  <span>&</span>  <span>e</span>  <span>&</span>  <span>3</span></pre>
            <pre><span class="chords">F5</span> <span class="chords">G5</span> <span class="chords">G5</span> <span class="chords">F5</span> <span class="chords">G5</span></pre>

            <audio controls loop onplay="pauseOtherAudio(this)">
              <source src="r1.wav" type="audio/wav" />
              Your browser doesn't support audio.
            </audio>
          </div>

          <div class="riff">
            <pre><span class="riff-section-title">r2</span>: 1 bar</pre>
            <pre><span>1</span>  <span>&</span>  <span>e</span>  <span>&</span>  <span>3</span></pre>
            <pre><span class="chords">A#5</span> <span class="chords">C5</span> <span class="chords">C5</span> <span class="chords">A#5</span> <span class="chords">C5</span></pre>

            <audio controls loop onplay="pauseOtherAudio(this)">
              <source src="r2.wav" type="audio/wav" />
              Your browser doesn't support audio.
            </audio>
          </div>

          <div class="riff">
            <pre><span class="riff-section-title">r3</span>: 1 bar</pre>
            <pre><span>1</span>  <span>3</span></pre>
            <pre><span class="chords">D#5</span> <span class="chords">D5</span></pre>

            <audio controls loop onplay="pauseOtherAudio(this)">
              <source src="r3.wav" type="audio/wav" />
              Your browser doesn't support audio.
            </audio>
          </div>

          <div class="riff">
            <pre><span class="riff-section-title">r4</span>: 2 bars</pre>
            <pre><span>2</span>  <span>2</span>  <span>4</span></pre>
            <pre><span class="chords">C5</span> <span class="chords">A#5</span> <span class="chords">G5</span></pre>

            <audio controls loop onplay="pauseOtherAudio(this)">
              <source src="r4.wav" type="audio/wav" />
              Your browser doesn't support audio.
            </audio>
          </div>

          <div class="riff">
            <pre><span class="riff-section-title">r5</span>: 1 bars</pre>
            <pre><span>3/8</span>  <span>3/8</span>  <span>1/4</span></pre>
            <pre><span class="chords">C5</span> <span class="chords">A#5</span> <span class="chords">A#5add7</span></pre>

            <audio controls loop onplay="pauseOtherAudio(this)">
              <source src="r5.wav" type="audio/wav" />
              Your browser doesn't support audio.
            </audio>
          </div>
        </div>
      </div>

      <br />
      <hr />
      <br />
      <br />

      <div>
        <div class="section-title">Intro</div>
        <pre><span class="riff-section-title">r1</span>x4</pre>

        <div class="section-title">Chorus</div>
        <pre>(<span class="riff-section-title">r1</span> <span class="riff-section-title">r2</span> <span class="riff-section-title">r3</span> <span class="riff-section-title">r1</span>)x2</pre>
        <pre><span>The sky is burnin'</span><br /><span>I believe my soul's on fire</span><br /><span>You are, I'm learning</span><br /><span>The key to my desire</span></pre>
        <pre><span class="riff-section-title">r1</span></pre>

        <div class="section-title">Verse</div>
        <pre><span class="riff-section-title">r4</span>x3 <span class="riff-section-title">r5</span></pre>
        <pre><span>Waiting for the van to arrive</span><br /><span>The prisoners were lined up outside</span><br /><span>I jumped a wall, hitched a ride</span><br /><span>And now I'm here to say</span><br /><span>I love you, baby, anyway</span></pre>
        <pre><span class="riff-section-title">r1</span>x2</pre>

        <div class="section-title">Chorus</div>
        <pre>(<span class="riff-section-title">r1</span> <span class="riff-section-title">r2</span> <span class="riff-section-title">r3</span> <span class="riff-section-title">r1</span>)x2</pre>
        <pre><span>The sky is burnin'</span><br /><span>I believe my soul's on fire</span><br /><span>You are, I'm learning</span><br /><span>The key to my desire</span></pre>
        <pre><span class="riff-section-title">r1</span></pre>

        <div class="section-title">Verse</div>
        <pre><span class="riff-section-title">r4</span>x3 <span class="riff-section-title">r5</span></pre>
        <pre><span>Ran across the country fields in all the rain</span><br /><span>They had guns and dogs and everything</span><br /><span>Swam a river trying to lose my trail</span><br /><span>But they caught me, under the bridge</span><br /><span>Oh yeah, baby</span></pre>
        <pre><span class="riff-section-title">r1</span>x2</pre>

        <div class="section-title">Chorus</div>
        <pre>(<span class="riff-section-title">r1</span> <span class="riff-section-title">r2</span> <span class="riff-section-title">r3</span> <span class="riff-section-title">r1</span>)x2</pre>
        <pre><span>The sky is burnin'</span><br /><span>I believe my soul's on fire</span><br /><span>You are, I am learning</span><br /><span>The key to my desire</span></pre>
        <pre><span class="riff-section-title">r1</span></pre>

        <div class="section-title">Guitar Solo</div>
        <pre><span class="riff-section-title">r4</span>x3 <span class="riff-section-title">r5</span></pre>
        <pre><span class="riff-section-title">r1</span>x4</pre>

        <div class="section-title">Chorus</div>
        <pre>(<span class="riff-section-title">r1</span> <span class="riff-section-title">r2</span> <span class="riff-section-title">r3</span> <span class="riff-section-title">r1</span>)x2</pre>
        <pre><span>The sky is burnin'</span><br /><span>I believe my soul's on fire</span><br /><span>You are, I am learning</span><br /><span>The key to all my desires</span></pre>
        <pre><span class="riff-section-title">r1</span></pre>

        <div class="section-title">Verse</div>
        <pre><span class="riff-section-title">r4</span>x3 <span class="riff-section-title">r5</span></pre>
        <pre><span>The judge said, 'This man's a danger to humanity</span><br /><span>We're gonna lock him up and throw away the key'</span><br /><span>Now, baby your love has sent me to jail</span><br /><span>But I'd rather die than see you with another man</span></pre>
        <pre><span class="riff-section-title">r1</span>x2</pre>

        <div class="section-title">Outro</div>
        <pre><span class="riff-section-title">r1</span>x40</pre>
      </div>
    </div>

    <script>
      function pauseOtherAudio(currentAudio) {
        document.querySelectorAll("audio").forEach((audio) => {
          if (audio !== currentAudio) {
            audio.pause();
          }
        });
      }

      const chordMap = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
      let currentTranspose = +2;
      const originalKey = "A#";
      const originalOriginalKey = "A#";
      const initialDistance = 0;

      function transposeChord(chord, steps) {
        if (!chord || chord.trim() === "") return chord;

        const isMinor = chord.includes("m") && !chord.includes("maj");
        let root = chord.match(/^[A-G][#b]?/);
        if (!root) return chord;
        root = root[0];

        const suffix = chord.substring(root.length);
        root = root.replace("Db", "C#").replace("Eb", "D#").replace("Gb", "F#").replace("Ab", "G#").replace("Bb", "A#");

        let index = chordMap.indexOf(root);
        if (index === -1) return chord;

        let newIndex = (index + steps) % 12;
        if (newIndex < 0) newIndex += 12;

        return chordMap[newIndex] + suffix;
      }

      function transposeUp() {
        currentTranspose = (currentTranspose + 1) % 12;
        updateChords();
      }

      function transposeDown() {
        currentTranspose = (currentTranspose - 1) % 12;
        updateChords();
      }

      function updateChords() {
        document.querySelectorAll(".chords").forEach((element) => {
          const originalChord = element.getAttribute("data-original") || element.textContent;
          if (!element.getAttribute("data-original")) {
            element.setAttribute("data-original", originalChord);
          }
          element.textContent = transposeChord(originalChord, currentTranspose);
        });

        const newKey = transposeChord(originalKey, currentTranspose);
        const totalDistance = initialDistance + currentTranspose;

        let displayDistance = totalDistance;
        if (displayDistance > 6) displayDistance -= 12;
        else if (displayDistance < -6) displayDistance += 12;

        const sign = displayDistance > 0 ? "+" : "";
        const oppSign = displayDistance === 0 ? "" : displayDistance > 0 ? "-" : "+";

        document.getElementById("currentKey").textContent = newKey;
        document.getElementById("currentKeyDistance").textContent = sign + displayDistance;
        document.getElementById("originalKeyDistance").textContent = oppSign + Math.abs(displayDistance);
      }

      updateChords();
    </script>
  </body>
</html>
